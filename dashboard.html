<!DOCTYPE html>
<html lang="th">
<head>
Â  <meta charset="UTF-8">
Â  <title>Dashboard - Interpreter Booking</title>
Â  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
Â  <style>
Â  Â  /* à¹‚à¸—à¸™à¸ªà¸µà¹ƒà¸«à¸¡à¹ˆ: #F5EFE6, #E8DFCA, #6D94C5, #CBDCEB */
Â  Â  * { box-sizing: border-box; }
Â  Â  body {Â 
Â  Â  Â  margin:0;Â 
Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  /* à¸à¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¸«à¸¥à¸±à¸: à¹ƒà¸Šà¹‰à¸ªà¸µà¸­à¹ˆà¸­à¸™/à¸à¸¥à¸²à¸‡à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸ªà¸šà¸²à¸¢à¸•à¸² */
Â  Â  Â  background: #F5EFE6; /* à¸ªà¸µà¹€à¸šà¸ˆ-à¸‚à¸²à¸§à¸™à¸§à¸¥ */
Â  Â  Â  min-height: 100vh;
Â  Â  }
Â  Â Â 
Â  Â  .navbar {
Â  Â  Â  /* à¸ªà¸µ Navbar: à¹ƒà¸Šà¹‰à¸ªà¸µà¸«à¸¥à¸±à¸ #6D94C5 */
Â  Â  Â  background: #6D94C5;
Â  Â  Â  color: #fff;
Â  Â  Â  padding: 16px 32px;
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
Â  Â  }
Â  Â Â 
Â  Â  .navbar-right {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 16px;
Â  Â  }
Â  Â Â 
Â  Â  .navbar .title {Â 
Â  Â  Â  font-size: 22px;
Â  Â  Â  font-weight: 600;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 8px;
Â  Â  }
Â  Â Â 
Â  Â  .navbar .user-info {Â 
Â  Â  Â  font-size: 14px;
Â  Â  Â  /* à¸ªà¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰: à¹ƒà¸Šà¹‰à¸ªà¸µà¸£à¸­à¸‡à¸­à¹ˆà¸­à¸™ #CBDCEB */
Â  Â  Â  background: #CBDCEB;
Â  Â  Â  color: #333;
Â  Â  Â  padding: 8px 16px;
Â  Â  Â  border-radius: 20px;
Â  Â  Â  backdrop-filter: none; /* à¸¥à¸š blur à¸­à¸­à¸à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¹€à¸‚à¹‰à¸²à¸à¸±à¸šà¸ªà¸µà¸—à¸¶à¸š */
Â  Â  }
Â  Â Â 
Â  Â  .navbar button {
Â  Â  Â  /* à¸›à¸¸à¹ˆà¸¡ Logout: à¹ƒà¸Šà¹‰à¸ªà¸µà¸£à¸­à¸‡à¸—à¸µà¹ˆà¹ƒà¸«à¹‰à¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸ªà¸¶à¸à¹à¸•à¸à¸•à¹ˆà¸²à¸‡ (à¸­à¸²à¸ˆà¹ƒà¸Šà¹‰à¸ªà¸µà¹€à¸‚à¹‰à¸¡à¸à¸§à¹ˆà¸²à¸«à¸£à¸·à¸­à¸ªà¸µà¸«à¸¥à¸±à¸à¹€à¸”à¸´à¸¡) */
Â  Â  Â  background: #E8DFCA; /* à¸ªà¸µà¹€à¸šà¸ˆà¹€à¸‚à¹‰à¸¡à¸‚à¸¶à¹‰à¸™ */
Â  Â  Â  color: #333;
Â  Â  Â  border: none;
Â  Â  Â  padding: 8px 20px;
Â  Â  Â  border-radius: 20px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-weight: 500;
Â  Â  Â  transition: transform 0.2s, box-shadow 0.2s;
Â  Â  }
Â  Â Â 
Â  Â  .navbar button:hover {
Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
Â  Â  Â  background: #F5EFE6;
Â  Â  }
Â  Â Â 
Â  Â  .main {Â 
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: 1fr 2fr;
Â  Â  Â  gap: 24px;
Â  Â  Â  padding: 32px;
Â  Â  Â  max-width: 1600px;
Â  Â  Â  margin: 0 auto;
Â  Â  }
Â  Â Â 
Â  Â  .mybooking {
Â  Â  Â  background: #fff;
Â  Â  Â  border-radius: 16px;
Â  Â  Â  padding: 24px;
Â  Â  Â  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
Â  Â  }
Â  Â Â 
Â  Â  .mybooking h3 {Â 
Â  Â  Â  margin-top: 0;
Â  Â  Â  color: #2d3748;
Â  Â  Â  font-size: 18px;
Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â Â 
Â  Â  .booking-item {Â 
Â  Â  Â  /* à¹à¸–à¸šà¸ªà¸µà¸”à¹‰à¸²à¸™à¸‹à¹‰à¸²à¸¢: à¹ƒà¸Šà¹‰à¸ªà¸µà¸«à¸¥à¸±à¸ #6D94C5 */
Â  Â  Â  border-left: 4px solid #6D94C5;
Â  Â  Â  /* à¸à¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡à¸£à¸²à¸¢à¸à¸²à¸£: à¹ƒà¸Šà¹‰à¸ªà¸µà¸£à¸­à¸‡à¸­à¹ˆà¸­à¸™ #F5EFE6 */
Â  Â  Â  background: #F5EFE6;
Â  Â  Â  padding: 16px;
Â  Â  Â  margin-bottom: 12px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  transition: transform 0.2s, box-shadow 0.2s;
Â  Â  }
Â  Â Â 
Â  Â  .booking-item:hover {
Â  Â  Â  transform: translateX(4px);
Â  Â  Â  /* Shadow: à¹€à¸™à¹‰à¸™à¸”à¹‰à¸§à¸¢à¸ªà¸µà¸«à¸¥à¸±à¸ */
Â  Â  Â  box-shadow: 0 4px 12px rgba(109, 148, 197, 0.3);
Â  Â  }
Â  Â Â 
Â  Â  .booking-item:last-child {Â 
Â  Â  Â  margin-bottom: 0;
Â  Â  }
Â  Â Â 
Â  Â  .booking-item > div {
Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  font-size: 14px;
Â  Â  Â  color: #4a5568;
Â  Â  }
Â  Â Â 
Â  Â  .booking-item > div:last-child {
Â  Â  Â  margin-bottom: 0;
Â  Â  }
Â  Â Â 
Â  Â  .booking-item b {
Â  Â  Â  color: #2d3748;
Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â Â 
Â  Â  .booking-actions button {
Â  Â  Â  margin-left: 5px;
Â  Â  Â  padding: 4px 12px;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-size: 13px;
Â  Â  Â  transition: all 0.2s;
Â  Â  }
Â  Â Â 
Â  Â  .mybooking-header {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  margin-bottom: 16px;
Â  Â  Â  padding-bottom: 12px;
Â  Â  Â  border-bottom: 2px solid #E8DFCA; /* à¹€à¸ªà¹‰à¸™à¹à¸šà¹ˆà¸‡: à¹ƒà¸Šà¹‰à¸ªà¸µà¸£à¸­à¸‡à¹€à¸‚à¹‰à¸¡à¸‚à¸¶à¹‰à¸™ */
Â  Â  }

Â  Â  .mybooking-header h3 {
Â  Â  Â  margin: 0;
Â  Â  Â  font-size: 18px;
Â  Â  }

Â  Â  .edit-btn {Â 
Â  Â  Â  /* à¸›à¸¸à¹ˆà¸¡à¹à¸à¹‰à¹„à¸‚: à¹ƒà¸Šà¹‰à¸ªà¸µà¸ªà¹‰à¸¡/à¹€à¸«à¸¥à¸·à¸­à¸‡ (à¸„à¸‡à¹€à¸”à¸´à¸¡à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¹€à¸«à¹‡à¸™à¸„à¸§à¸²à¸¡à¹à¸•à¸à¸•à¹ˆà¸²à¸‡) */
Â  Â  Â  background: #fbbf24;
Â  Â  Â  color: #000;
Â  Â  }
Â  Â Â 
Â  Â  .edit-btn:hover {
Â  Â  Â  background: #f59e0b;
Â  Â  }
Â  Â Â 
Â  Â  .cancel-btn {Â 
Â  Â  Â  /* à¸›à¸¸à¹ˆà¸¡à¸¢à¸à¹€à¸¥à¸´à¸: à¹ƒà¸Šà¹‰à¸ªà¸µà¹à¸”à¸‡à¸¡à¸²à¸•à¸£à¸à¸²à¸™ (à¸„à¸‡à¹€à¸”à¸´à¸¡à¹€à¸à¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢à¸ªà¸²à¸à¸¥) */
Â  Â  Â  background: #dc3545;
Â  Â  Â  color: #fff;
Â  Â  }
Â  Â Â 
Â  Â  .cancel-btn:hover {
Â  Â  Â  transform: translateY(-1px);
Â  Â  Â  box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
Â  Â  }
Â  Â Â 
Â  Â  .see-more {
Â  Â  Â  display: block;
Â  Â  Â  text-align: right;
Â  Â  Â  /* à¸ªà¸µà¸¥à¸´à¸‡à¸à¹Œ: à¹ƒà¸Šà¹‰à¸ªà¸µà¸«à¸¥à¸±à¸ #6D94C5 */
Â  Â  Â  color: #6D94C5;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-weight: 500;
Â  Â  Â  transition: color 0.2s;
Â  Â  }
Â  Â Â 
Â  Â  .see-more:hover {
Â  Â  Â  color: #4a6c9e; /* à¸ªà¸µà¹€à¸‚à¹‰à¸¡à¸‚à¸¶à¹‰à¸™à¹€à¸¡à¸·à¹ˆà¸­ hover */
Â  Â  Â  text-decoration: underline;
Â  Â  }
Â  Â Â 
Â  Â  .new-booking-btn {
Â  Â  Â  display: block;
Â  Â  Â  width: 100%;
Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  padding: 14px;
Â  Â  Â  /* à¸›à¸¸à¹ˆà¸¡à¸«à¸¥à¸±à¸: à¹ƒà¸Šà¹‰à¸ªà¸µà¸«à¸¥à¸±à¸ #6D94C5 */
Â  Â  Â  background: #6D94C5;
Â  Â  Â  color: #fff;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  font-size: 16px;
Â  Â  Â  font-weight: 600;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: transform 0.2s, box-shadow 0.2s;
Â  Â  }
Â  Â Â 
Â  Â  .new-booking-btn:hover {
Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  box-shadow: 0 8px 20px rgba(109, 148, 197, 0.4);
Â  Â  }
Â  Â Â 
Â  Â  .calendar-box {
Â  Â  Â  background: #fff;
Â  Â  Â  border-radius: 16px;
Â  Â  Â  padding: 24px;
Â  Â  Â  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
Â  Â  }
Â  Â Â 
Â  Â  #loader {
Â  Â  Â  display: none;
Â  Â  Â  position: fixed;
Â  Â  Â  top: 0;
Â  Â  Â  left: 0;
Â  Â  Â  right: 0;
Â  Â  Â  bottom: 0;
Â  Â  Â  background: rgba(255,255,255,0.9);
Â  Â  Â  z-index: 9999;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  }
Â  Â Â 
Â  Â  #loader div {
Â  Â  Â  border: 6px solid #f3f3f3;
Â  Â  Â  /* à¸ªà¸µ Loader: à¹ƒà¸Šà¹‰à¸ªà¸µà¸«à¸¥à¸±à¸ #6D94C5 */
Â  Â  Â  border-top: 6px solid #6D94C5;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  width: 60px;
Â  Â  Â  height: 60px;
Â  Â  Â  animation: spin 1s linear infinite;
Â  Â  }
Â  Â Â 
Â  Â  @keyframes spin {
Â  Â  Â  0% { transform: rotate(0deg); }
Â  Â  Â  100% { transform: rotate(360deg); }
Â  Â  }
Â  Â Â 
Â  Â  .modal {
Â  Â  Â  display: none;
Â  Â  Â  position: fixed;
Â  Â  Â  z-index: 10000;
Â  Â  Â  left: 0;
Â  Â  Â  top: 0;
Â  Â  Â  width: 100%;
Â  Â  Â  height: 100%;
Â  Â  Â  overflow: auto;
Â  Â  Â  background-color: rgba(0,0,0,0.4); /* à¸¥à¸”à¸„à¸§à¸²à¸¡à¸—à¸¶à¸šà¹à¸ªà¸‡à¸¥à¸‡à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ */
Â  Â  Â  backdrop-filter: blur(4px);
Â  Â  }
Â  Â Â 
Â  Â  .modal-content {
Â  Â  Â  background-color: #fff;
Â  Â  Â  margin: 1% auto;
Â  Â  Â  padding: 32px;
Â  Â  Â  border: none;
Â  Â  Â  width: 95%;
Â  Â  Â  max-width: 1200px;
Â  Â  Â  border-radius: 16px;
Â  Â  Â  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
Â  Â  Â  animation: slideDown 0.3s ease-out;
Â  Â  }
Â  Â Â 
Â  Â  @keyframes slideDown {
Â  Â  Â  from {
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  transform: translateY(-50px);
Â  Â  Â  }
Â  Â  Â  to {
Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  transform: translateY(0);
Â  Â  Â  }
Â  Â  }

Â  Â  .modal-header {Â 
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  padding-bottom: 16px;
Â  Â  Â  border-bottom: 2px solid #E8DFCA; /* à¹€à¸ªà¹‰à¸™à¹à¸šà¹ˆà¸‡: à¹ƒà¸Šà¹‰à¸ªà¸µà¸£à¸­à¸‡à¹€à¸‚à¹‰à¸¡à¸‚à¸¶à¹‰à¸™ */
Â  Â  Â  margin-bottom: 24px;
Â  Â  }
Â  Â Â 
Â  Â  .modal-header h3 {Â 
Â  Â  Â  margin: 0;
Â  Â  Â  color: #2d3748;
Â  Â  Â  font-size: 24px;
Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â Â 
Â  Â  .close {
Â  Â  Â  color: #a0aec0;
Â  Â  Â  font-size: 32px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: color 0.2s;
Â  Â  }
Â  Â Â 
Â  Â  .close:hover {Â 
Â  Â  Â  color: #6D94C5; /* à¸ªà¸µà¸«à¸¥à¸±à¸à¹€à¸¡à¸·à¹ˆà¸­ hover */
Â  Â  }
Â  Â Â 
Â  Â  table {Â 
Â  Â  Â  width: 100%;
Â  Â  Â  border-collapse: collapse;
Â  Â  Â  margin-top: 10px;
Â  Â  }
Â  Â Â 
Â  Â  th, td {Â 
Â  Â  Â  padding: 14px;
Â  Â  Â  border-bottom: 1px solid #E8DFCA; /* à¹€à¸ªà¹‰à¸™à¸•à¸²à¸£à¸²à¸‡: à¹ƒà¸Šà¹‰à¸ªà¸µà¸£à¸­à¸‡à¹€à¸‚à¹‰à¸¡à¸‚à¸¶à¹‰à¸™ */
Â  Â  Â  text-align: left;
Â  Â  }
Â  Â Â 
Â  Â  th {Â 
Â  Â  Â  /* à¸«à¸±à¸§à¸•à¸²à¸£à¸²à¸‡: à¹ƒà¸Šà¹‰à¸ªà¸µà¸«à¸¥à¸±à¸ #6D94C5 */
Â  Â  Â  background: #6D94C5;
Â  Â  Â  color: #fff;
Â  Â  Â  font-weight: 600;
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  font-size: 13px;
Â  Â  Â  letter-spacing: 0.5px;
Â  Â  }
Â  Â Â 
Â  Â  tbody tr:hover {
Â  Â  Â  background: #F5EFE6; /* à¸ªà¸µà¸£à¸²à¸¢à¸à¸²à¸£à¸•à¸²à¸£à¸²à¸‡à¹€à¸¡à¸·à¹ˆà¸­ hover */
Â  Â  }
Â  Â Â 
Â  Â  form label {Â 
Â  Â  Â  display: block;
Â  Â  Â  margin-top: 16px;
Â  Â  Â  font-weight: 600;
Â  Â  Â  color: #2d3748;
Â  Â  Â  font-size: 14px;
Â  Â  }
Â  Â Â 
Â  Â  form input, form select, form textarea {
Â  Â  Â  width: 100%;
Â  Â  Â  padding: 10px 14px;
Â  Â  Â  margin-top: 6px;
Â  Â  Â  /* Border: à¹ƒà¸Šà¹‰à¸ªà¸µà¸£à¸­à¸‡à¸­à¹ˆà¸­à¸™ #CBDCEB */
Â  Â  Â  border: 2px solid #CBDCEB;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  font-size: 14px;
Â  Â  Â  transition: border-color 0.2s;
Â  Â  }
Â  Â Â 
Â  Â  form input:focus, form select:focus, form textarea:focus {
Â  Â  Â  outline: none;
Â  Â  Â  /* Focus Color: à¹ƒà¸Šà¹‰à¸ªà¸µà¸«à¸¥à¸±à¸ #6D94C5 */
Â  Â  Â  border-color: #6D94C5;
Â  Â  }
Â  Â Â 
Â  Â  form textarea {Â 
Â  Â  Â  resize: vertical;
Â  Â  }
Â  Â Â 
Â  Â  .swal2-container {
Â  Â  Â  z-index: 30000 !important;
Â  Â  Â  position: fixed !important;
Â  Â  }

Â  Â  form button[type="submit"] {
Â  Â  Â  margin-top: 24px;
Â  Â  Â  padding: 12px 24px;
Â  Â  Â  /* à¸›à¸¸à¹ˆà¸¡ Submit: à¹ƒà¸Šà¹‰à¸ªà¸µà¸«à¸¥à¸±à¸ #6D94C5 */
Â  Â  Â  background: #6D94C5;
Â  Â  Â  color: #fff;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-weight: 600;
Â  Â  Â  font-size: 15px;
Â  Â  Â  width: 100%;
Â  Â  Â  transition: transform 0.2s, box-shadow 0.2s;
Â  Â  }
Â  Â Â 
Â  Â  form button[type="submit"]:hover {
Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  box-shadow: 0 6px 16px rgba(109, 148, 197, 0.4);
Â  Â  }
Â  Â Â 
Â  Â  form button[type="submit"]:disabled {
Â  Â  Â  opacity: 0.6;
Â  Â  Â  cursor: not-allowed;
Â  Â  Â  transform: none;
Â  Â  }

Â  Â  @media (max-width: 1024px) {
Â  Â  Â  .main {
Â  Â  Â  Â  grid-template-columns: 1fr;
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="navbar">
Â  Â  <div class="title">
Â  Â  Â  <span>ğŸ“˜</span> Â  Â  Â  <span>Interpreter Booking Dashboard</span>
Â  Â  </div>
Â  Â  <div class="navbar-right">
Â  Â  Â  <div class="user-info" id="userInfo"></div>
Â  Â  Â  <button onclick="logout()">Logout</button>
Â  Â  </div>
Â  </div>

Â  <div class="main">
Â  Â  Â  Â  <div class="mybooking">
Â  Â  Â  <button class="new-booking-btn" onclick="openNewBookingModal()">+ New Booking</button>
Â  Â  Â  <div class="mybooking-header">
Â  Â  Â  Â  <h3>My Bookings (Latest)</h3>
Â  Â  Â  Â  <span class="see-more" onclick="openModal()">See more â†’</span>
Â  Â  Â  </div>
Â  Â  Â  <div id="myBookingList"></div>
Â  Â  </div>

Â  Â  Â  Â  <div class="calendar-box">
Â  Â  Â  <iframe
Â  Â  Â  Â  id="calendarFrame"
Â  Â  Â  Â  src="calendar.html"
Â  Â  Â  Â  style="width:100%; height:600px; border:none; border-radius:10px;">
Â  Â  Â  </iframe>
Â  Â  </div>
Â  </div>

Â  Â  <div id="loader"><div></div></div>

Â  Â  <div id="myModal" class="modal">
Â  Â  <div class="modal-content">
Â  Â  Â  <div class="modal-header">
Â  Â  Â  Â  <h3>My All Bookings</h3>
Â  Â  Â  Â  <span class="close" onclick="closeModal()">&times;</span>
Â  Â  Â  </div>
Â  Â  Â  <table id="myBookingTable">
Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  <th>Title Meeting</th>
Â  Â  Â  Â  Â  Â  <th>Time</th>
Â  Â  Â  Â  Â  Â  <th>Interpreter</th>
Â  Â  Â  Â  Â  Â  <th>Location</th>
Â  Â  Â  Â  Â  Â  <th>Status</th>
Â  Â  Â  Â  Â  Â  <th>Action</th>
Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  </thead>
Â  Â  Â  Â  <tbody></tbody>
Â  Â  Â  </table>
Â  Â  </div>
Â  </div>

Â  Â  <div id="newBookingModal" class="modal">
Â  Â  <div class="modal-content" style="max-width:500px;">
Â  Â  Â  <div class="modal-header">
Â  Â  Â  Â  <h3>New Booking</h3>
Â  Â  Â  Â  <span class="close" onclick="closeNewBookingModal()">&times;</span>
Â  Â  Â  </div>
Â  Â  Â  <form id="bookingForm">
Â  Â  Â  Â  <label>Date:</label>
Â  Â  Â  Â  <input type="date" id="date" name="date" required>

Â  Â  Â  Â  <label>Interpreter:</label>
Â  Â  Â  Â  <select id="interpreterId" name="interpreterId" required>
Â  Â  Â  Â  Â  <option value="" disabled selected>Select Interpreter</option>
Â  Â  Â  Â  Â  <option value="i001">SOM SAN</option>
Â  Â  Â  Â  Â  <option value="i002">GOOK SAN</option>
Â  Â  Â  Â  Â  <option value="i003">POOKY SAN</option>
Â  Â  Â  Â  Â  <option value="i004">L SAN</option>
Â  Â  Â  Â  </select>

Â  Â  Â  Â  <label for="timeFrom">Time From:</label>
Â  Â  Â  Â  <select id="timeFrom" name="startTime" required>
Â  Â  Â  Â  Â  <option value="" disabled selected>HH:MM</option>
Â  Â  Â  Â  Â  <option value="07:00">07:00</option>
Â  Â  Â  Â  Â  <option value="07:30">07:30</option>
Â  Â  Â  Â  Â  <option value="08:00">08:00</option>
Â  Â  Â  Â  Â  <option value="08:30">08:30</option>
Â  Â  Â  Â  Â  <option value="09:00">09:00</option>
Â  Â  Â  Â  Â  <option value="09:30">09:30</option>
Â  Â  Â  Â  Â  <option value="10:00">10:00</option>
Â  Â  Â  Â  Â  <option value="10:30">10:30</option>
Â  Â  Â  Â  Â  <option value="11:00">11:00</option>
Â  Â  Â  Â  Â  <option value="11:30">11:30</option>
Â  Â  Â  Â  Â  <option value="12:00">12:00</option>
Â  Â  Â  Â  Â  <option value="12:30">12:30</option>
Â  Â  Â  Â  Â  <option value="13:00">13:00</option>
Â  Â  Â  Â  Â  <option value="13:30">13:30</option>
Â  Â  Â  Â  Â  <option value="14:00">14:00</option>
Â  Â  Â  Â  Â  <option value="14:30">14:30</option>
Â  Â  Â  Â  Â  <option value="15:00">15:00</option>
Â  Â  Â  Â  Â  <option value="15:30">15:30</option>
Â  Â  Â  Â  Â  <option value="16:00">16:00</option>
Â  Â  Â  Â  Â  <option value="16:30">16:30</option>
Â  Â  Â  Â  Â  <option value="17:00">17:00</option>
Â  Â  Â  Â  Â  <option value="17:30">17:30</option>
Â  Â  Â  Â  Â  <option value="18:00">18:00</option>
Â  Â  Â  Â  Â  <option value="18:30">18:30</option>
Â  Â  Â  Â  Â  <option value="19:00">19:00</option>
Â  Â  Â  Â  Â  <option value="19:30">19:30</option>
Â  Â  Â  Â  Â  <option value="20:00">20:00</option>
Â  Â  Â  Â  </select>

Â  Â  Â  Â  <label for="timeTo">Time To:</label>
Â  Â  Â  Â  <select id="timeTo" name="endTime" required>
Â  Â  Â  Â  Â  <option value="" disabled selected>HH:MM</option>
Â  Â  Â  Â  Â  <option value="07:29">07:30</option>
Â  Â  Â  Â  Â  <option value="07:59">08:00</option>
Â  Â  Â  Â  Â  <option value="08:29">08:30</option>
Â  Â  Â  Â  Â  <option value="08:59">09:00</option>
Â  Â  Â  Â  Â  <option value="09:29">09:30</option>
Â  Â  Â  Â  Â  <option value="09:59">10:00</option>
Â  Â  Â  Â  Â  <option value="10:29">10:30</option>
Â  Â  Â  Â  Â  <option value="10:59">11:00</option>
Â  Â  Â  Â  Â  <option value="11:29">11:30</option>
Â  Â  Â  Â  Â  <option value="11:59">12:00</option>
Â  Â  Â  Â  Â  <option value="12:29">12:30</option>
Â  Â  Â  Â  Â  <option value="12:59">13:00</option>
Â  Â  Â  Â  Â  <option value="13:29">13:30</option>
Â  Â  Â  Â  Â  <option value="13:59">14:00</option>
Â  Â  Â  Â  Â  <option value="14:29">14:30</option>
Â  Â  Â  Â  Â  <option value="14:59">15:00</option>
Â  Â  Â  Â  Â  <option value="15:29">15:30</option>
Â  Â  Â  Â  Â  <option value="15:59">16:00</option>
Â  Â  Â  Â  Â  <option value="16:29">16:30</option>
Â  Â  Â  Â  Â  <option value="16:59">17:00</option>
Â  Â  Â  Â  Â  <option value="17:29">17:30</option>
Â  Â  Â  Â  Â  <option value="17:59">18:00</option>
Â  Â  Â  Â  Â  <option value="18:29">18:30</option>
Â  Â  Â  Â  Â  <option value="18:59">19:00</option>
Â  Â  Â  Â  Â  <option value="19:29">19:30</option>
Â  Â  Â  Â  Â  <option value="19:59">20:00</option>
Â  Â  Â  Â  </select>

Â  Â  Â  Â  <label for="title">Title Meeting:</label>
Â  Â  Â  Â  <input type="text" id="title" name="title" required>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <label>Location:</label>
Â  Â  Â  Â  <select id="location" name="location" required>
Â  Â  Â  Â  Â  <option value="" disabled selected>Select Location</option>
Â  Â  Â  Â  Â  <option>CHP-M201-Rajapruek</option>
Â  Â  Â  Â  Â  <option>CHP-M202-Fuengfah</option>
Â  Â  Â  Â  Â  <option>CHP-M203-Koson</option>
Â  Â  Â  Â  Â  <option>CHP-M204-Lilawadee</option>
Â  Â  Â  Â  Â  <option>CHP-M205-Training Center</option>
Â  Â  Â  Â  Â  <option>CHP-M301-Anchan</option>
Â  Â  Â  Â  Â  <option>CHP-M302-Supanniga</option>
Â  Â  Â  Â  Â  <option>CHP-M303-Bualuang</option>
Â  Â  Â  Â  Â  <option>CHP-M304-Puang Sad</option>
Â  Â  Â  Â  Â  <option>CHP-M305-Parichat</option>
Â  Â  Â  Â  Â  <option>G1P-Guest-Room</option>
Â  Â  Â  Â  Â  <option>G1P-Meeting1</option>
Â  Â  Â  Â  Â  <option>G1P-Meeting2</option>
Â  Â  Â  Â  Â  <option>G1P-Meeting3</option>
Â  Â  Â  Â  Â  <option>G1P-Meeting4</option>
Â  Â  Â  Â  Â  <option>G1P-Meeting5</option>
Â  Â  Â  Â  </select>

Â  Â  Â  Â  <button type="submit">Submit</button>
Â  Â  Â  </form>
Â  Â  </div>
Â  </div>

<script>
Â  const API_URL = "https://script.google.com/macros/s/AKfycbzYxFK_Mt-tEFPw-wr4_HrtgSIvlrqMRSNXR8-XviH8mahbXvDvXyIDrBRBbPZ9RfI/exec";Â 

Â  function showLoader(){ document.getElementById("loader").style.display="flex"; }
Â  function hideLoader(){ document.getElementById("loader").style.display="none"; }
Â  function logout(){ localStorage.removeItem("loggedInUser"); window.location.href="login.html"; }

Â  // Modal Control
Â  function openModal(){ document.getElementById("myModal").style.display="block"; renderAllMyBookings(); }
Â  function closeModal(){ document.getElementById("myModal").style.display="none"; }
Â  function openNewBookingModal(){Â 
Â  Â  document.getElementById("bookingForm").reset();
Â  Â  document.getElementById("newBookingModal").style.display="block";Â 
Â  }
Â  function closeNewBookingModal(){Â 
Â  Â  document.getElementById("newBookingModal").style.display="none";Â 
Â  }

Â  async function loadMyBookings(){
Â  Â  const user = JSON.parse(localStorage.getItem("loggedInUser"));
Â  Â  if(!user){
Â  Â  Â  Swal.fire("à¸à¸£à¸¸à¸“à¸² Login à¸à¹ˆà¸­à¸™","","warning").then(()=> window.location.href="login.html");
Â  Â  Â  return;
Â  Â  }
Â  Â  document.getElementById("userInfo").innerText = `ğŸ‘¤ ${user.username} (${user.role})`;

Â  Â  try {
Â  Â  Â  showLoader();
Â  Â  Â  const res = await fetch(API_URL+"?page=listBookings");
Â  Â  Â  const bookings = await res.json();
Â  Â  Â  hideLoader();

Â  Â  Â  const myBookings = bookings.filter(b=> b.userId === user.id);
Â  Â  Â  myBookings.sort((a,b)=> new Date(b.createdAt) - new Date(a.createdAt));
Â  Â  Â  renderMyBookings(myBookings.slice(0,5));
Â  Â  Â  window.allMyBookings = myBookings;
Â  Â  } catch(err){
Â  Â  Â  hideLoader();
Â  Â  Â  Swal.fire("Error", err.message,"error");
Â  Â  }
Â  }

Â  // ================= TIME FORMAT =================
Â  function parseDatePart(dateVal){
Â  Â  if (!dateVal) return null;
Â  Â  const s = String(dateVal).trim();
Â  Â  if (/^\d{4}-\d{2}-\d{2}$/.test(s)) {
Â  Â  Â  const [y,m,d] = s.split('-').map(Number);
Â  Â  Â  return new Date(y, m-1, d);
Â  Â  }
Â  Â  const d = new Date(s);
Â  Â  return isNaN(d) ? null : new Date(d.getFullYear(), d.getMonth(), d.getDate());
Â  }

Â  function parseTimePart(timeVal, kind){
Â  Â  if (!timeVal) return null;
Â  Â  const s = String(timeVal).trim();

Â  Â  let m = s.match(/^(\d{1,2}):(\d{2})(?::\d{2})?$/);
Â  Â  if (m) {
Â  Â  Â  return { hh: parseInt(m[1],10), mm: parseInt(m[2],10) };
Â  Â  }

Â  Â  const d = new Date(s);
Â  Â  if (!isNaN(d)) {
Â  Â  Â  return { hh: d.getHours(), mm: d.getMinutes() };
Â  Â  }

Â  Â  return null;
Â  }

Â  function formatRange(dateVal, startTime, endTime){
Â  Â  const dÂ  = parseDatePart(dateVal);
Â  Â  const st = parseTimePart(startTime, 'start');
Â  Â  const et = parseTimePart(endTime, 'end');
Â  Â  if (!d || !st || !et) return `${dateVal} ${startTime} - ${endTime}`;

Â  Â  const start = new Date(d.getFullYear(), d.getMonth(), d.getDate(), st.hh, st.mm);
Â  Â  const endÂ  Â = new Date(d.getFullYear(), d.getMonth(), d.getDate(), et.hh, et.mm);
Â  Â  end.setMinutes(end.getMinutes() + 1);

Â  Â  const dateStrÂ  = start.toLocaleDateString("en-GB", { day:"numeric", month:"long", year:"numeric" });
Â  Â  const startStr = start.toLocaleTimeString("en-GB", { hour:"2-digit", minute:"2-digit", hour12:false });
Â  Â  const endStrÂ  Â = end.toLocaleTimeString("en-GB",Â  Â { hour:"2-digit", minute:"2-digit", hour12:false });
Â  Â  return `${dateStr}, ${startStr} - ${endStr}`;
Â  }

Â  // ================= INTERPRETER MAP =================
Â  const INTERPRETERS = {
Â  Â  i001: { name: "SOM SAN",Â  email: "teeraporn.sanyaprachasakul.xijqx@resonac.com" },
Â  Â  i002: { name: "GOOK SAN", email: "boonnak.songnok.xijmk@resonac.com" },
Â  Â  i003: { name: "POOKY SAN",email: "waraporn.yokao.xlbmb@resonac.com" },
Â  Â  i004: { name: "L SAN",Â  Â  email: "prataksara.poolsawad.xmpuh@resonac.com" }
Â  };
Â  function getInterpreterEmail(id){ return (INTERPRETERS[id] && INTERPRETERS[id].email) || ""; }
Â  function getInterpreterName(id){ return (INTERPRETERS[id] && INTERPRETERS[id].name) || id; }

Â  // ================= RENDER =================
Â  function renderMyBookings(list){
Â  Â  const container = document.getElementById("myBookingList");
Â  Â  container.innerHTML="";
Â  Â  if(list.length===0){Â 
Â  Â  Â  container.innerHTML="<p style='text-align:center;color:#a0aec0;padding:20px;'>No bookings</p>";Â 
Â  Â  Â  return;Â 
Â  Â  }
Â  Â  list.forEach(b=>{
Â  Â  Â  const div=document.createElement("div");
Â  Â  Â  div.className="booking-item";
Â  Â  Â  div.innerHTML=`
Â  Â  Â  Â  <div><b>Title Meeting:</b> ${b.title || "-"}</div>
Â  Â  Â  Â  <div><b>Time:</b> ${formatRange(b.date, b.startTime, b.endTime)}</div>
Â  Â  Â  Â  <div><b>Interpreter:</b> ${getInterpreterName(b.interpreterId)}</div>
Â  Â  Â  Â  <div><b>Location:</b> ${b.location || ""}</div>
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <b>Status:</b>
Â  Â  Â  Â  Â  <span style="color:${
Â  Â  Â  Â  Â  Â  b.status === 'BOOKED' ? '#28a745' : /* BOOKED: à¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§ */
Â  Â  Â  Â  Â  Â  b.status === 'CANCELED' ? '#dc3545' : /* CANCELED: à¸ªà¸µà¹à¸”à¸‡ */ '#333'
Â  Â  Â  Â  Â  }">
Â  Â  Â  Â  Â  Â  ${b.status || ""}
Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  </div>
Â  Â  Â  `;
Â  Â  Â  container.appendChild(div);
Â  Â  });
Â  }

Â  function renderAllMyBookings(){
Â  Â  const tbody=document.querySelector("#myBookingTable tbody");
Â  Â  tbody.innerHTML="";
Â  Â  if(!window.allMyBookings || window.allMyBookings.length===0){
Â  Â  Â  tbody.innerHTML="<tr><td colspan='6' style='text-align:center;color:#a0aec0;padding:20px;'>No bookings</td></tr>";Â 
Â  Â  Â  return;
Â  Â  }
Â  Â  window.allMyBookings.forEach(b=>{
Â  Â  Â  const tr=document.createElement("tr");
Â  Â  Â  tr.innerHTML=`
Â  Â  Â  Â  <td>${b.title || "-"}</td>
Â  Â  Â  Â  <td>${formatRange(b.date, b.startTime, b.endTime)}</td>
Â  Â  Â  Â  <td>${getInterpreterName(b.interpreterId)}</td>
Â  Â  Â  Â  <td>${b.location||""}</td>
Â  Â  Â  Â  <td style="color:${
Â  Â  Â  Â  Â  b.status === 'BOOKED' ? '#28a745' :
Â  Â  Â  Â  Â  b.status === 'CANCELED' ? '#dc3545' : '#333'
Â  Â  Â  Â  }">${b.status||""}</td>
Â  Â  Â  Â  <td><button class="cancel-btn" onclick="cancelBooking('${b.bookingId}')">Cancel</button></td>
Â  Â  Â  `;
Â  Â  Â  tbody.appendChild(tr);
Â  Â  });
Â  }

Â  // Submit New Booking
Â  document.getElementById("bookingForm").addEventListener("submit", async function(e){Â 
Â  Â  e.preventDefault();
Â  Â  const user = JSON.parse(localStorage.getItem("loggedInUser"));
Â  Â  const submitBtn = this.querySelector("button[type='submit']");
Â  Â Â 
Â  Â  submitBtn.disabled = true;
Â  Â  submitBtn.innerText = "Submitting...";

Â  Â  function formatTimeStr(val){
Â  Â  Â  if (!val) return "";
Â  Â  Â  const parts = String(val).split(":");
Â  Â  Â  const hh = ('0' + parts[0]).slice(-2);
Â  Â  Â  const mm = ('0' + parts[1]).slice(-2);
Â  Â  Â  return `${hh}:${mm}`;
Â  Â  }

Â  Â  const startVal = document.getElementById("timeFrom").value;
Â  Â  const endValÂ  Â = document.getElementById("timeTo").value;

Â  Â  if (!startVal || !endVal) {
Â  Â  Â  Swal.fire("âš ï¸ Warning", "Start time must be less than end time", "warning");
Â  Â  Â  submitBtn.disabled = false;
Â  Â  Â  submitBtn.innerText = "Submit";
Â  Â  Â  return;
Â  Â  }

Â  Â  const startMins = parseInt(startVal.split(":")[0]) * 60 + parseInt(startVal.split(":")[1]);
Â  Â  const endMinsÂ  Â = parseInt(endVal.split(":")[0]) * 60 + parseInt(endVal.split(":")[1]);
Â  Â  if (startMins >= endMins) {
Â  Â  Â  Swal.fire("âš ï¸ Warning", "Start time must be less than end time", "warning");
Â  Â  Â  submitBtn.disabled = false;
Â  Â  Â  submitBtn.innerText = "Submit";
Â  Â  Â  return;
Â  Â  }

Â  Â  const form = new URLSearchParams();
Â  Â  form.append("page","newBooking");
Â  Â  form.append("userId", user.id);
Â  Â  form.append("userEmail", user.email);
Â  Â  form.append("interpreterId", document.getElementById("interpreterId").value);
Â  Â  form.append("interpreterEmail", getInterpreterEmail(document.getElementById("interpreterId").value));
Â  Â  form.append("date", document.getElementById("date").value);
Â  Â  form.append("startTime", formatTimeStr(startVal));
Â  Â  form.append("endTime", formatTimeStr(endVal));
Â  Â  form.append("title", document.getElementById("title").value);
Â  Â  form.append("location", document.getElementById("location").value);
Â  Â  form.append("status", "BOOKED");
Â  Â  form.append("createdAt", new Date().toISOString());

Â  Â  try {
Â  Â  Â  showLoader();
Â  Â  Â  const res = await fetch(API_URL, { method:"POST", body:form });
Â  Â  Â  const data = await res.json();
Â  Â  Â  hideLoader();

Â  Â  Â  if(data.success){
Â  Â  Â  Â  closeNewBookingModal();
Â  Â  Â  Â  this.reset();
Â  Â  Â  Â  Swal.fire("âœ… Success", data.message, "success").then(() => {
Â  Â  Â  Â  Â  loadMyBookings();
Â  Â  Â  Â  Â  const iframe = document.getElementById("calendarFrame");
Â  Â  Â  Â  Â  if (iframe) {
Â  Â  Â  Â  Â  Â  iframe.src = `calendar.html?v=${new Date().getTime()}`;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  } else {
Â  Â  Â  Â  if (data.message && data.message.includes("Duplicate")) {
Â  Â  Â  Â  Â  Swal.fire({
Â  Â  Â  Â  Â  Â  title: "âš ï¸ Duplicate Booking",
Â  Â  Â  Â  Â  Â  text: data.message,
Â  Â  Â  Â  Â  Â  icon: "warning",
Â  Â  Â  Â  Â  Â  didOpen: () => { document.querySelector('.swal2-container').style.zIndex = 30000; }
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Swal.fire("âŒ Error", data.message, "error");
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  } catch(err){
Â  Â  Â  hideLoader();
Â  Â  Â  Swal.fire("Error", err.message,"error");
Â  Â  } finally {
Â  Â  Â  submitBtn.disabled = false;
Â  Â  Â  submitBtn.innerText = "Submit";
Â  Â  }
Â  });

Â  async function cancelBooking(bookingId) {
Â  Â  const confirmResult = await Swal.fire({
Â  Â  Â  title: "Are you sure?",
Â  Â  Â  text: "Do you want to cancel this booking?",
Â  Â  Â  icon: "warning",
Â  Â  Â  showCancelButton: true,
Â  Â  Â  confirmButtonColor: "#d33",
Â  Â  Â  cancelButtonColor: "#3085d6",
Â  Â  Â  confirmButtonText: "Yes, cancel it",
Â  Â  Â  cancelButtonText: "No, keep it"
Â  Â  });

Â  Â  if (!confirmResult.isConfirmed) return;

Â  Â  const form = new URLSearchParams();
Â  Â  form.append("page", "cancelBooking");
Â  Â  form.append("bookingId", bookingId);

Â  Â  try {
Â  Â  Â  showLoader();
Â  Â  Â  const res = await fetch(API_URL, { method: "POST", body: form });
Â  Â  Â  const data = await res.json();
Â  Â  Â  hideLoader();

Â  Â  Â  if (data.success) {
Â  Â  Â  Â  Swal.fire("âœ… Canceled", data.message, "success").then(() => {
Â  Â  Â  Â  Â  loadMyBookings();
Â  Â  Â  Â  Â  renderAllMyBookings();

Â  Â  Â  Â  Â  const iframe = document.getElementById("calendarFrame");
Â  Â  Â  Â  Â  if (iframe) iframe.src = `calendar.html?v=${new Date().getTime()}`;

Â  Â  Â  Â  Â  document.getElementById("myModal").style.display = "none";
Â  Â  Â  Â  });
Â  Â  Â  } else {
Â  Â  Â  Â  Swal.fire("Error", data.message, "error");
Â  Â  Â  }
Â  Â  } catch (err) {
Â  Â  Â  hideLoader();
Â  Â  Â  Swal.fire("Error", err.message, "error");
Â  Â  }
Â  }

Â  loadMyBookings();
</script>

</body>
</html>
